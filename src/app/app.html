<p-toast />

@if (authService.isAuthenticated()) {
  <div class="min-h-screen">
    <nav class="navbar shadow-2">
      <div class="navbar-container">
        <a routerLink="/" class="navbar-brand">
          <i class="pi pi-building"></i>
          <span>Space Booking</span>
        </a>
        
        <div class="navbar-menu">
          <a routerLink="/spaces" routerLinkActive="active" class="navbar-item">
            <i class="pi pi-building"></i>
            <span>Espacios</span>
          </a>
          <a routerLink="/bookings" routerLinkActive="active" class="navbar-item">
            <i class="pi pi-calendar"></i>
            <span>Mis Reservas</span>
          </a>
          @if (authService.isAdmin() || authService.isManager()) {
            <div class="navbar-dropdown">
              <button class="navbar-item dropdown-trigger">
                <i class="pi pi-cog"></i>
                <span>Gestión</span>
                <i class="pi pi-chevron-down"></i>
              </button>
              <div class="dropdown-menu">
                <a routerLink="/admin/spaces" routerLinkActive="active" class="dropdown-item">
                  <i class="pi pi-building"></i>
                  <span>Espacios</span>
                </a>
                <a routerLink="/admin/reviews" routerLinkActive="active" class="dropdown-item">
                  <i class="pi pi-star"></i>
                  <span>Reseñas</span>
                </a>
                @if (authService.isAdmin()) {
                  <a routerLink="/admin/users" routerLinkActive="active" class="dropdown-item">
                    <i class="pi pi-users"></i>
                    <span>Usuarios</span>
                  </a>
                }
              </div>
            </div>
          }
        </div>

        <div class="navbar-actions">
          <div class="user-info">
            <i class="pi pi-user"></i>
            <span>{{ authService.currentUser()?.name }}</span>
          </div>
          <button 
            class="logout-btn"
            (click)="logout()"
            type="button"
          >
            <i class="pi pi-sign-out"></i>
            <span>Salir</span>
          </button>
        </div>
      </div>
    </nav>

    <main class="main-content">
      <router-outlet />
    </main>
  </div>
} @else {
  <router-outlet />
}
